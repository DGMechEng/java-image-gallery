package edu.au.cc.gallery;

import java.io.BufferedReader;
import java.io.FileReader;
import java.sql.DriverManager;
import java.sql.Connection;
import java.io.IOException;

public class DB {

    //    private static final String dbName = "image-gallery";
    private static final String dbUrl = "jdbc:postgresql://demo-database-1.c3n5o7gpctqm.us-west-2.rds.amazonaws.com/image-gallery";
    private Connection connection;

    private String getPassword() {

	try{
	    BufferedReader br = new BufferedReader(new FileReader("/home/ec2-user/.sql-passwd"));
	    String result = br.readLine();
	    br.close();
	    return result;
	} catch (IOException ex) {
	    System.err.println("Error opening password file.  Make sure .sql-passwd exists and contains a valid password");
	}
	return null;
    }

    
    public void connect() {
	try{
	connection = DriverManager.getConnection(dbUrl, "image-gallery", getPassword());
	} catch (ClassNotFoundException ex) {
	    ex.printStackTrace();
	}
    }

    public static void demo() {
	DB db = new DB();
	db.connect();
    }
}
